(this.webpackJsonpagora=this.webpackJsonpagora||[]).push([[0],{104:function(e,t,n){},162:function(e,t,n){},292:function(e,t,n){"use strict";n.r(t);var r=n(5),c=n(0),a=n.n(c),o=n(18),i=n.n(o),s=(n(162),n(33)),u=function(e){return{type:"SET_CLIENT",payload:e}},l=function(e){return{type:"SET_JOIN_LEAVE",payload:e}},d=function(e){return{type:"SET_AUDIO_MUTE",payload:e}},j=function(e){return{type:"SET_VIDEO_MUTE",payload:e}},p=n(40),f=n.n(p),h=n(60),m=n(98),b=n.n(m),O=n(299),x=n(151),v=n(56),y=n(298),g=n(294),E=n(295),S=n(301),T=n(302),I=n(303),N=n(304),w=n(305),_=n(306),A=(n(103),n(104),function(){var e,t=Object(s.c)((function(e){return e.isStart})),n=Object(s.c)((function(e){return e.isAudioMute})),c=Object(s.c)((function(e){return e.isVideoMute})),a=Object(s.c)((function(e){return e.user})),o=Object(s.c)((function(e){return e.videoData})),i=Object(s.b)(),p=O.a.Content,m=O.a.Header;a.username&&(e=(e=a.username).charAt(0).toUpperCase());var A=function(e){console.log("Error: ",e)},C=function(){var e=Object(h.a)(f.a.mark((function e(){var t,n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(e){var t=document.getElementById(e);t&&t.parentNode.removeChild(t)},n=function(e){var t=document.createElement("div");t.id=e,t.style.transform="rotateY(180deg)",document.getElementById("remote-stream-container").appendChild(t)},t=b.a.createClient({mode:o.mode,codec:o.codec}),i({type:"SET_LOADING"}),i(u(t)),i(l(!0)),e.next=8,t.init(o.appId);case 8:return e.next=10,t.join(o.token,o.channel,null,(function(e){var n=b.a.createStream({audio:!0,video:!0});n.init((function(){n.play("local-stream-container"),t.publish(n,A)}),A),i({type:"SET_LOCAL_STREAM",payload:n}),i({type:"SET_LOADING"})}),A);case 10:t.on("stream-added",(function(e){t.subscribe(e.stream,A)})),t.on("stream-subscribed",(function(e){var t=e.stream,r=String(t.getId());n(r),t.play(r)})),t.on("stream-removed",(function(e){var t=e.stream,n=String(t.getId());t.close(),r(n)})),t.on("peer-leave",(function(e){var t=e.stream,n=String(t.getId());t.close(),r(n)}));case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){return Object(r.jsxs)(x.a,{type:"primary",shape:"round",onClick:function(){return C()},children:[Object(r.jsx)(S.a,{}),"Start Video Call"]})},D=function(){var e=Object(s.c)((function(e){return e.agoraClient})),t=Object(s.c)((function(e){return e.localStream})),a=function(){var n=Object(h.a)(f.a.mark((function n(){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t&&(t.close(),e.unpublish(t)),n.next=3,e.leave();case 3:b("local-stream-container"),i(l(!1));case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),o=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.muteAudio();case 2:i(d(!1));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.unmuteAudio();case 2:i(d(!0));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.muteVideo();case 2:i(j(!1));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.unmuteVideo();case 2:i(j(!0));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function b(e){var t=document.getElementById(e);t&&t.removeChild(t.childNodes[0])}var O=function(){return Object(r.jsx)(v.a,{title:"\u95dc\u9589\u9ea5\u514b\u98a8",color:"#00000050",children:Object(r.jsx)(x.a,{type:"primary",shape:"circle",onClick:function(){return o()},children:Object(r.jsx)(T.a,{})})})},y=function(){return Object(r.jsx)(v.a,{title:"\u958b\u555f\u9ea5\u514b\u98a8",color:"#00000050",children:Object(r.jsx)(x.a,{type:"default",shape:"circle",onClick:function(){return u()},children:Object(r.jsx)(I.a,{})})})},g=function(){return Object(r.jsx)(v.a,{title:"\u95dc\u9589\u93e1\u982d",color:"#00000050",children:Object(r.jsx)(x.a,{type:"primary",shape:"circle",onClick:function(){return p()},children:Object(r.jsx)(N.a,{})})})},E=function(){return Object(r.jsx)(v.a,{title:"\u958b\u555f\u93e1\u982d",color:"#00000050",children:Object(r.jsx)(x.a,{type:"default",shape:"circle",onClick:function(){return m()},children:Object(r.jsx)(S.a,{})})})};return Object(r.jsxs)("div",{className:"video-toolbtns",children:[n?Object(r.jsx)(y,{}):Object(r.jsx)(O,{}),c?Object(r.jsx)(E,{}):Object(r.jsx)(g,{}),Object(r.jsx)(v.a,{title:"\u7d50\u675f\u901a\u8a71",color:"#00000050",children:Object(r.jsx)(x.a,{type:"danger",shape:"circle",onClick:function(){return a()},children:Object(r.jsx)(w.a,{rotate:225})})})]})};return Object(r.jsxs)(O.a,{className:"site-layout",children:[Object(r.jsxs)(m,{className:"page-header",children:[Object(r.jsx)(y.a,{size:40,children:e}),Object(r.jsx)(_.a,{style:{fontSize:"30px",color:"#fff"}})," Agora Demo"]}),Object(r.jsx)(p,{className:"main-container",children:Object(r.jsx)("div",{className:"chat-container",children:Object(r.jsxs)(g.a,{children:[Object(r.jsx)(E.a,{className:"column",xs:{span:22,offset:1},md:{span:12,offset:t?"6":"0"},children:Object(r.jsx)("div",{className:"chat-box ".concat(t?"padding":"join"," "),children:Object(r.jsx)("div",{id:"local-stream-container"})})}),Object(r.jsx)(E.a,{className:"column",xs:{span:22,offset:1},md:{span:12,offset:t?"6":"0"},children:Object(r.jsx)("div",{className:"chat-box ".concat(t?"":"waiting"," "),children:Object(r.jsx)("div",{id:"remote-stream-container"})})}),Object(r.jsx)(E.a,{className:"column",span:24,children:t?Object(r.jsx)(k,{}):Object(r.jsx)(D,{})})]})})})]})}),C=n(297),k=n(296),D=n(300),L=n(307),M=n(308),U=n(309),V=n(310),R=n(311),P=n(312);function G(){var e=Object(s.c)((function(e){return e.isLoading})),t=Object(s.c)((function(e){return e.currentPage})),n=Object(s.b)(),c=O.a.Content,a=C.a.Title;return Object(r.jsxs)("div",{className:"App",children:[0===t&&Object(r.jsx)(O.a,{children:Object(r.jsxs)(c,{className:"login-container",children:[Object(r.jsx)("p",{children:Object(r.jsx)(_.a,{style:{fontSize:"130px",color:"#fff"}})}),Object(r.jsx)(a,{level:2,children:"Agora Demo"}),Object(r.jsxs)(k.a,{name:"normal_login",className:"login-form",onFinish:function(e){n({type:"SET_LOADING"}),n({type:"SET_USER",payload:e});var t={appId:e.appid,channel:e.channel,uid:"",token:e.token,cameraId:"",microphoneId:"",mode:"rtc",codec:"h264"};setTimeout((function(){n({type:"SET_CURRENTPAGE",payload:1}),n({type:"SET_LOADING"})}),1500),n(function(e){return{type:"SET_VIDEO_STATE",payload:e}}(t))},children:[Object(r.jsx)(k.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}],children:Object(r.jsx)(D.a,{prefix:Object(r.jsx)(L.a,{className:"site-form-item-icon"}),placeholder:"Your Name"})}),Object(r.jsx)(k.a.Item,{name:"appid",rules:[{required:!0,message:"Please input your App ID!"}],children:Object(r.jsx)(D.a,{prefix:Object(r.jsx)(M.a,{className:"site-form-item-icon"}),placeholder:"App ID"})}),Object(r.jsx)(k.a.Item,{name:"token",rules:[{required:!0,message:"Please input your token!"}],children:Object(r.jsx)(D.a,{prefix:Object(r.jsx)(U.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Token"})}),Object(r.jsx)(k.a.Item,{name:"channel",rules:[{required:!0,message:"Please input channel"}],children:Object(r.jsx)(D.a,{prefix:Object(r.jsx)(V.a,{className:"site-form-item-icon"}),type:"text",placeholder:"Channel"})}),Object(r.jsx)(k.a.Item,{children:Object(r.jsxs)(x.a,{type:"primary",htmlType:"submit",className:"login-form-button",shape:"round",children:[Object(r.jsx)(R.a,{}),"Enter"]})})]}),Object(r.jsx)(a,{level:5,children:"By Claire Lee"})]})}),1===t&&Object(r.jsx)(A,{}),e&&Object(r.jsxs)("div",{className:"loader-container",children:[Object(r.jsx)(P.a,{className:"loader",spin:!0,style:{fontSize:"36px",color:"#fff"}}),Object(r.jsx)("div",{className:"loader-bg"})]})]})}var B=n(50),q=n(148),z=n(149),J={appId:"",channel:"",uid:"",token:void 0,cameraId:"",microphoneId:"",mode:"rtc",codec:"h264"},W=[],Y=Object(B.combineReducers)({isLoading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOADING":return!e;default:return e}},isStart:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_JOIN_LEAVE":return!e;default:return e}},isAudioMute:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AUDIO_MUTE":return!e;default:return e}},isVideoMute:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_VIDEO_MUTE":return!e;default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return t.payload;default:return e}},agoraClient:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CLIENT":return t.payload;default:return e}},localStream:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOCAL_STREAM":return t.payload;default:return e}},videoData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_VIDEO_STATE":return t.payload;default:return e}},currentPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENTPAGE":return t.payload;default:return e}}}),F=Object(z.composeWithDevTools)(Object(B.applyMiddleware)(q.a)),H=Object(B.createStore)(Y,F);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(s.a,{store:H,children:Object(r.jsx)(G,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[292,1,2]]]);
//# sourceMappingURL=main.22c9ea46.chunk.js.map