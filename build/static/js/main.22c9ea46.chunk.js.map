{"version":3,"sources":["actions/index.js","components/Main.js","App.js","reducers/videoReducer.js","reducers/userReducer.js","reducers/index.js","reducers/statusReducer.js","reducers/pageReducer.js","store.js","serviceWorker.js","index.js"],"names":["setClient","client","type","payload","setJoinLeaveBtn","isJoin","setAudioMute","isAudioMute","setVideoMute","isVideoMute","MainContainer","userName","isStart","useSelector","state","userData","user","videoData","dispatch","useDispatch","Content","Layout","Header","username","charAt","toUpperCase","handleError","err","console","log","startLocalStream","addVideoStream","removeVideoStream","a","elementId","remoteDiv","document","getElementById","parentNode","removeChild","streamDiv","createElement","id","style","transform","appendChild","AgoraRTC","createClient","mode","codec","init","appId","join","token","channel","uid","localStream","createStream","audio","video","play","publish","on","evt","subscribe","stream","streamId","String","getId","close","StartBtn","shape","onClick","VideoCameraOutlined","ToolBtn","agoraClient","leave","unpublish","removeLocalVideoStream","muteAudioLocalStream","muteAudio","unmuteAudioLocalStream","unmuteAudio","muteVideoLocalStream","muteVideo","unmuteVideoLocalStream","unmuteVideo","childNodes","MuteAudioBtn","title","color","AudioMutedOutlined","UnMuteAudioBtn","AudioOutlined","MuteVideoBtn","CloseSquareOutlined","UnMuteVideoBtn","className","PhoneOutlined","rotate","size","WhatsAppOutlined","fontSize","xs","span","offset","md","App","isLoading","currentPage","Title","Typography","level","name","onFinish","values","data","appid","cameraId","microphoneId","setTimeout","setVideoState","Item","rules","required","message","prefix","UserOutlined","placeholder","IdcardOutlined","LockOutlined","AppstoreAddOutlined","htmlType","SendOutlined","Loading3QuartersOutlined","spin","initialState","undefined","rootReducer","combineReducers","action","composedEnhancer","composeWithDevTools","applyMiddleware","thunkMiddleware","store","createStore","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"gNA2BaA,EAAY,SAACC,GACtB,MAAO,CACLC,KAAM,aACNC,QAASF,IAWFG,EAAkB,SAACC,GAC5B,MAAO,CACHH,KAAM,iBACNC,QAASE,IAIJC,EAAe,SAACC,GACzB,MAAO,CACHL,KAAM,iBACNC,QAASI,IAIJC,EAAe,SAACC,GACzB,MAAO,CACHP,KAAM,iBACNC,QAASM,I,qJC1CJC,G,cAAgB,WACzB,IAQIC,EAREC,EAAUC,aAAY,SAAAC,GAAK,OAAIA,EAAMF,WACrCL,EAAcM,aAAY,SAAAC,GAAK,OAAIA,EAAMP,eACzCE,EAAcI,aAAY,SAAAC,GAAK,OAAIA,EAAML,eACzCM,EAAWF,aAAY,SAAAC,GAAK,OAAIA,EAAME,QACtCC,EAAYJ,aAAY,SAAAC,GAAK,OAAIA,EAAMG,aACvCC,EAAWC,cACTC,EAAoBC,IAApBD,QAASE,EAAWD,IAAXC,OAGbP,EAASQ,WAETZ,GADAA,EAAWI,EAASQ,UACAC,OAAO,GAAGC,eAGlC,IAAMC,EAAc,SAASC,GACzBC,QAAQC,IAAI,UAAWF,IAGrBG,EAAgB,uCAAG,mBA4BZC,EAQAC,EApCY,SAAAC,EAAA,6DAoCZD,EApCY,SAoCME,GACvB,IAAIC,EAAYC,SAASC,eAAeH,GACpCC,GAAWA,EAAUG,WAAWC,YAAYJ,IAV3CJ,EA5BY,SA4BGG,GACpB,IAAIM,EAAYJ,SAASK,cAAc,OACvCD,EAAUE,GAAKR,EACfM,EAAUG,MAAMC,UAAY,kBACNR,SAASC,eAAe,2BAC9BQ,YAAYL,IA/B1BvC,EAAS6C,IAASC,aAAa,CAAEC,KAAM/B,EAAU+B,KAAMC,MAAOhC,EAAUgC,QAE9E/B,ED/BG,CACHhB,KAAM,gBC+BNgB,EAASlB,EAAUC,IACnBiB,EAASd,GAAgB,IANJ,SAQfH,EAAOiD,KAAKjC,EAAUkC,OARP,wBAUflD,EAAOmD,KAAKnC,EAAUoC,MAAOpC,EAAUqC,QAAS,MAAM,SAACC,GAEzD,IAAMC,EAAcV,IAASW,aAAa,CACtCC,OAAO,EACPC,OAAO,IAGXH,EAAYN,MAAK,WACbM,EAAYI,KAAK,0BACjB3D,EAAO4D,QAAQL,EAAa9B,KAE7BA,GAEHR,EDvBD,CACLhB,KAAM,mBACNC,QCqB8BqD,IACxBtC,EDnDD,CACHhB,KAAM,kBCoDHwB,GA1BkB,QAyCrBzB,EAAO6D,GAAG,gBAAgB,SAASC,GAC/B9D,EAAO+D,UAAUD,EAAIE,OAAQvC,MAGjCzB,EAAO6D,GAAG,qBAAqB,SAASC,GACpC,IAAIE,EAASF,EAAIE,OACbC,EAAWC,OAAOF,EAAOG,SAC7BrC,EAAemC,GACfD,EAAOL,KAAKM,MAGhBjE,EAAO6D,GAAG,kBAAkB,SAASC,GACjC,IAAIE,EAASF,EAAIE,OACbC,EAAWC,OAAOF,EAAOG,SAC7BH,EAAOI,QACPrC,EAAkBkC,MAEtBjE,EAAO6D,GAAG,cAAc,SAASC,GAC7B,IAAIE,EAASF,EAAIE,OACbC,EAAWC,OAAOF,EAAOG,SAC7BH,EAAOI,QACPrC,EAAkBkC,MA9DD,4CAAH,qDAoEhBI,EAAW,WACb,OACI,eAAC,IAAD,CAAQpE,KAAK,UAAUqE,MAAM,QAAQC,QAAS,kBAAK1C,KAAnD,UAAuE,cAAC2C,EAAA,EAAD,IAAvE,uBAIFC,EAAU,WAEZ,IAAMzE,EAASY,aAAY,SAAAC,GAAK,OAAIA,EAAM6D,eACpCnB,EAAc3C,aAAY,SAAAC,GAAK,OAAIA,EAAM0C,eACzCoB,EAAK,uCAAG,sBAAA3C,EAAA,6DAENuB,IACAA,EAAYa,QACZpE,EAAO4E,UAAUrB,IAJX,SAOJvD,EAAO2E,QAPH,OASVE,EAAuB,0BACvB5D,EAASd,GAAgB,IAVf,2CAAH,qDAaL2E,EAAoB,uCAAG,sBAAA9C,EAAA,sEACnBuB,EAAYwB,YADO,OAEzB9D,EAASZ,GAAa,IAFG,2CAAH,qDAKpB2E,EAAsB,uCAAG,sBAAAhD,EAAA,sEACrBuB,EAAY0B,cADS,OAE3BhE,EAASZ,GAAa,IAFK,2CAAH,qDAKtB6E,EAAoB,uCAAG,sBAAAlD,EAAA,sEACnBuB,EAAY4B,YADO,OAEzBlE,EAASV,GAAa,IAFG,2CAAH,qDAKpB6E,EAAsB,uCAAG,sBAAApD,EAAA,sEACrBuB,EAAY8B,cADS,OAE3BpE,EAASV,GAAa,IAFK,2CAAH,qDAK5B,SAASsE,EAAuB5C,GAC5B,IAAIC,EAAYC,SAASC,eAAeH,GACpCC,GACAA,EAAUI,YAAYJ,EAAUoD,WAAW,IAInD,IAAMC,EAAe,WACjB,OACI,cAAC,IAAD,CAASC,MAAM,iCAAQC,MAAM,YAA7B,SACI,cAAC,IAAD,CAAQxF,KAAK,UAAUqE,MAAM,SAASC,QAAS,kBAAMO,KAArD,SAA6E,cAACY,EAAA,EAAD,SAKnFC,EAAiB,WACnB,OACI,cAAC,IAAD,CAASH,MAAM,iCAAQC,MAAM,YAA7B,SACI,cAAC,IAAD,CAAQxF,KAAK,UAAUqE,MAAM,SAASC,QAAS,kBAAMS,KAArD,SAA+E,cAACY,EAAA,EAAD,SAKrFC,EAAe,WACjB,OACI,cAAC,IAAD,CAASL,MAAM,2BAAOC,MAAM,YAA5B,SACI,cAAC,IAAD,CAAQxF,KAAK,UAAUqE,MAAM,SAASC,QAAS,kBAAMW,KAArD,SAA6E,cAACY,EAAA,EAAD,SAKnFC,EAAiB,WACnB,OACI,cAAC,IAAD,CAASP,MAAM,2BAAOC,MAAM,YAA5B,SACI,cAAC,IAAD,CAAQxF,KAAK,UAAUqE,MAAM,SAASC,QAAS,kBAAMa,KAArD,SAA+E,cAACZ,EAAA,EAAD,SAK3F,OACI,sBAAKwB,UAAU,iBAAf,UACK1F,EAAc,cAACqF,EAAD,IAAoB,cAACJ,EAAD,IAClC/E,EAAc,cAACuF,EAAD,IAAoB,cAACF,EAAD,IACnC,cAAC,IAAD,CAASL,MAAM,2BAAOC,MAAM,YAA5B,SACI,cAAC,IAAD,CAAQxF,KAAK,SAASqE,MAAM,SAASC,QAAS,kBAAMI,KAApD,SAA6D,cAACsB,EAAA,EAAD,CAAeC,OAAQ,cAMpG,OACI,eAAC,IAAD,CAAQF,UAAU,cAAlB,UACI,eAAC3E,EAAD,CAAQ2E,UAAU,cAAlB,UACI,cAAC,IAAD,CAAQG,KAAM,GAAd,SAAmBzF,IACnB,cAAC0F,EAAA,EAAD,CAAkB1D,MAAO,CAAE2D,SAAU,OAAQZ,MAAO,UAFxD,iBAIA,cAACtE,EAAD,CAAS6E,UAAU,iBAAnB,SACI,qBAAKA,UAAU,iBAAf,SACI,eAAC,IAAD,WACI,cAAC,IAAD,CAAKA,UAAU,SAASM,GAAI,CAAEC,KAAM,GAAIC,OAAQ,GAAKC,GAAI,CAAEF,KAAM,GAAIC,OAAQ7F,EAAU,IAAM,KAA7F,SACI,qBAAKqF,UAAS,mBAAcrF,EAAU,UAAY,OAApC,KAAd,SACI,qBAAK8B,GAAG,+BAIhB,cAAC,IAAD,CAAKuD,UAAU,SAASM,GAAI,CAAEC,KAAM,GAAIC,OAAQ,GAAKC,GAAI,CAAEF,KAAM,GAAIC,OAAQ7F,EAAU,IAAM,KAA7F,SACI,qBAAKqF,UAAS,mBAAcrF,EAAU,GAAK,UAA7B,KAAd,SACI,qBAAK8B,GAAG,gCAIhB,cAAC,IAAD,CAAKuD,UAAU,SAASO,KAAM,GAA9B,SACK5F,EAAU,cAAC0D,EAAD,IAAe,cAACI,EAAD,kB,iFCzMvC,SAASiC,IAEpB,IAAMC,EAAY/F,aAAY,SAAAC,GAAK,OAAIA,EAAM8F,aACvCC,EAAchG,aAAY,SAAAC,GAAK,OAAIA,EAAM+F,eACzC3F,EAAWC,cACTC,EAAYC,IAAZD,QACA0F,EAAUC,IAAVD,MA8BR,OACI,sBAAKb,UAAU,MAAf,UACqB,IAAhBY,GACD,cAAC,IAAD,UACI,eAACzF,EAAD,CAAS6E,UAAU,kBAAnB,UACI,4BAAG,cAACI,EAAA,EAAD,CAAkB1D,MAAO,CAAE2D,SAAU,QAASZ,MAAO,YACxD,cAACoB,EAAD,CAAOE,MAAO,EAAd,wBACA,eAAC,IAAD,CAAMC,KAAK,eAAehB,UAAU,aAAaiB,SAnC5C,SAACC,GAElBjG,EFnBG,CACHhB,KAAM,gBEmBNgB,EF3BG,CACHhB,KAAM,WACNC,QEyBiBgH,IAKjB,IAAMC,EAAO,CACTjE,MAAOgE,EAAOE,MACd/D,QAAS6D,EAAO7D,QAChBC,IAAK,GACLF,MAAO8D,EAAO9D,MACdiE,SAAU,GACVC,aAAc,GACdvE,KAAM,MACNC,MAAO,QAGXuE,YAAW,WACPtG,EFxBD,CACLhB,KAAM,kBACNC,QEsBuB,IACjBe,EFtCD,CACHhB,KAAM,kBEsCH,MAEHgB,EFpCqB,SAACkG,GAC1B,MAAO,CACLlH,KAAM,kBACNC,QAASiH,GEiCEK,CAAcL,KAWX,UACI,cAAC,IAAKM,KAAN,CAAWT,KAAK,WAAWU,MAAO,CAAE,CAAEC,UAAU,EAAMC,QAAS,gCAA/D,SACI,cAAC,IAAD,CAAOC,OAAQ,cAACC,EAAA,EAAD,CAAc9B,UAAU,wBAA0B+B,YAAY,gBAEjF,cAAC,IAAKN,KAAN,CAAWT,KAAK,QAAQU,MAAO,CAAE,CAAEC,UAAU,EAAMC,QAAS,8BAA5D,SACI,cAAC,IAAD,CAAOC,OAAQ,cAACG,EAAA,EAAD,CAAgBhC,UAAU,wBAA0B+B,YAAY,aAEnF,cAAC,IAAKN,KAAN,CAAWT,KAAK,QAAQU,MAAO,CAAE,CAAEC,UAAU,EAAMC,QAAS,6BAA5D,SACI,cAAC,IAAD,CAAOC,OAAQ,cAACI,EAAA,EAAD,CAAcjC,UAAU,wBACvC/F,KAAK,WACL8H,YAAY,YAGhB,cAAC,IAAKN,KAAN,CAAWT,KAAK,UAAUU,MAAO,CAAE,CAAEC,UAAU,EAAMC,QAAS,yBAA9D,SACI,cAAC,IAAD,CAAOC,OAAQ,cAACK,EAAA,EAAD,CAAqBlC,UAAU,wBAC9C/F,KAAK,OACL8H,YAAY,cAGhB,cAAC,IAAKN,KAAN,UACI,eAAC,IAAD,CAAQxH,KAAK,UAAUkI,SAAS,SAASnC,UAAU,oBAAoB1B,MAAM,QAA7E,UAAqF,cAAC8D,EAAA,EAAD,IAArF,gBAGR,cAACvB,EAAD,CAAOE,MAAO,EAAd,gCAIS,IAAhBH,GACG,cAAC,EAAD,IAEHD,GACG,sBAAKX,UAAU,mBAAf,UACI,cAACqC,EAAA,EAAD,CAA0BrC,UAAU,SAASsC,MAAI,EAAC5F,MAAO,CAAE2D,SAAU,OAAQZ,MAAO,UACpF,qBAAKO,UAAU,oB,8BC7F7BuC,EAAe,CACnBrF,MAAO,GACPG,QAAS,GACTC,IAAK,GACLF,WAAOoF,EACPnB,SAAU,GACVC,aAAc,GACdvE,KAAM,MACNC,MAAO,QCRHuF,EAAe,GCkBNE,EAZKC,0BAAgB,CAChC/B,UCoB0B,WAA4B,IAA3B9F,EAA0B,wDAAX8H,EAAW,uCACrD,OAAQA,EAAO1I,MACX,IAAK,cACD,OAAQY,EACZ,QACI,OAAOA,IDxBfF,QCRwB,WAA2B,IAA1BE,IAAyB,yDAAX8H,EAAW,uCAClD,OAAQA,EAAO1I,MACX,IAAK,iBACD,OAAQY,EACZ,QACI,OAAOA,IDIfP,YCA4B,WAA4B,IAA3BO,EAA0B,wDAAX8H,EAAW,uCACvD,OAAQA,EAAO1I,MACX,IAAK,iBACD,OAAQY,EACZ,QACI,OAAOA,IDJfL,YCQ4B,WAA4B,IAA3BK,EAA0B,wDAAX8H,EAAW,uCACvD,OAAQA,EAAO1I,MACX,IAAK,iBACD,OAAQY,EACZ,QACI,OAAOA,IDZfE,KDTuB,WAAmC,IAAlCF,EAAiC,uDAAzB0H,EAAcI,EAAW,uCACzD,OAAQA,EAAO1I,MACX,IAAK,WACD,OAAO0I,EAAOzI,QAClB,QACI,OAAOW,ICKf6D,YFSyB,WAAyB,IAAxB7D,EAAuB,uDAAf,GAAI8H,EAAW,uCACjD,OAAQA,EAAO1I,MACX,IAAK,aACD,OAAO0I,EAAOzI,QAElB,QACI,OAAOW,IEdf0C,YFkB8B,WAAyB,IAAxB1C,EAAuB,uDAAf,GAAI8H,EAAW,uCACtD,OAAQA,EAAO1I,MACX,IAAK,mBACD,OAAO0I,EAAOzI,QAElB,QACI,OAAOW,IEvBfG,UFH4B,WAAmC,IAAlCH,EAAiC,uDAAzB0H,EAAcI,EAAW,uCAC9D,OAAQA,EAAO1I,MACX,IAAK,kBACD,OAAO0I,EAAOzI,QAElB,QACI,OAAOW,IEFf+F,YEfuB,WAAwB,IAAvB/F,EAAsB,uDAAd,EAAG8H,EAAW,uCAC9C,OAAQA,EAAO1I,MACX,IAAK,kBACD,OAAO0I,EAAOzI,QAClB,QACI,OAAOW,MCAb+H,EAAmBC,8BACvBC,0BAAgBC,MAKHC,EADDC,sBAAYR,EAAaG,GCEnBM,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2DCVNC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,IAAD,CAAUT,MAAOA,EAAjB,SACE,cAAC,EAAD,QAGJ7G,SAASC,eAAe,SDqHpB,kBAAmBsH,WACrBA,UAAUC,cAAcC,MAAMC,MAAK,SAAAC,GACjCA,EAAaC,kB","file":"static/js/main.22c9ea46.chunk.js","sourcesContent":["export const setUser = (user) => {\n    return {\n        type: 'SET_USER',\n        payload: user\n    }\n}\n\nexport const setLoading = () => {\n    return {\n        type: 'SET_LOADING'\n    }\n}\n\nexport const setVideoState = (data) => {\n    return { \n      type: 'SET_VIDEO_STATE', \n      payload: data \n    }\n}\n\nexport const setPage = (index) => {\n    return { \n      type: 'SET_CURRENTPAGE', \n      payload: index \n    }\n}\n\nexport const setClient = (client) => {\n    return { \n      type: 'SET_CLIENT', \n      payload: client \n    }\n}\n\nexport const setLocalStream = (stream) => {\n    return { \n      type: 'SET_LOCAL_STREAM', \n      payload: stream \n    }\n}\n\nexport const setJoinLeaveBtn = (isJoin) => {\n    return {\n        type: 'SET_JOIN_LEAVE',\n        payload: isJoin\n    }\n}\n\nexport const setAudioMute = (isAudioMute) => {\n    return {\n        type: 'SET_AUDIO_MUTE',\n        payload: isAudioMute\n    }\n}\n\nexport const setVideoMute = (isVideoMute) => {\n    return {\n        type: 'SET_VIDEO_MUTE',\n        payload: isVideoMute\n    }\n}","import React from \"react\";\nimport AgoraRTC from \"agora-rtc-sdk\";\nimport { useSelector, useDispatch } from 'react-redux'\nimport { setLoading, setClient, setLocalStream, setJoinLeaveBtn, setAudioMute, setVideoMute } from '../actions'\nimport { Avatar, Layout, Row, Col, Button, Tooltip } from 'antd';\nimport {\n    WhatsAppOutlined,\n    PhoneOutlined,\n    AudioMutedOutlined,\n    AudioOutlined,\n    VideoCameraOutlined,\n    CloseSquareOutlined,\n} from '@ant-design/icons';\nimport 'antd/dist/antd.css';\nimport \"../App.css\";\n\nexport const MainContainer = () => {\n    const isStart = useSelector(state => state.isStart)\n    const isAudioMute = useSelector(state => state.isAudioMute)\n    const isVideoMute = useSelector(state => state.isVideoMute)\n    const userData = useSelector(state => state.user)\n    const videoData = useSelector(state => state.videoData)\n    const dispatch = useDispatch()\n    const { Content, Header } = Layout;\n\n    let userName;\n    if (userData.username) {\n        userName = userData.username;\n        userName = userName.charAt(0).toUpperCase();\n    }\n\n    const handleError = function(err) {\n        console.log(\"Error: \", err);\n    };\n\n    const startLocalStream = async () => {\n\n        const client = AgoraRTC.createClient({ mode: videoData.mode, codec: videoData.codec });\n\n        dispatch(setLoading(true));\n        dispatch(setClient(client));\n        dispatch(setJoinLeaveBtn(true))\n\n        await client.init(videoData.appId);\n\n        await client.join(videoData.token, videoData.channel, null, (uid) => {\n\n            const localStream = AgoraRTC.createStream({\n                audio: true,\n                video: true,\n            });\n\n            localStream.init(() => {\n                localStream.play(\"local-stream-container\");\n                client.publish(localStream, handleError);\n\n            }, handleError);\n\n            dispatch(setLocalStream(localStream));\n            dispatch(setLoading(false));\n\n        }, handleError);\n\n        function addVideoStream(elementId) {\n            let streamDiv = document.createElement(\"div\");\n            streamDiv.id = elementId;\n            streamDiv.style.transform = \"rotateY(180deg)\";\n            let remoteContainer = document.getElementById(\"remote-stream-container\");\n            remoteContainer.appendChild(streamDiv);\n        };\n\n        function removeVideoStream(elementId) {\n            let remoteDiv = document.getElementById(elementId);\n            if (remoteDiv) remoteDiv.parentNode.removeChild(remoteDiv);\n        };\n\n        client.on(\"stream-added\", function(evt) {\n            client.subscribe(evt.stream, handleError);\n        });\n\n        client.on(\"stream-subscribed\", function(evt) {\n            let stream = evt.stream;\n            let streamId = String(stream.getId());\n            addVideoStream(streamId);\n            stream.play(streamId);\n        });\n\n        client.on(\"stream-removed\", function(evt) {\n            let stream = evt.stream;\n            let streamId = String(stream.getId());\n            stream.close();\n            removeVideoStream(streamId);\n        });\n        client.on(\"peer-leave\", function(evt) {\n            let stream = evt.stream;\n            let streamId = String(stream.getId());\n            stream.close();\n            removeVideoStream(streamId);\n\n        });\n\n    };\n\n    const StartBtn = () => {\n        return (\n            <Button type=\"primary\" shape=\"round\" onClick={() =>startLocalStream()}><VideoCameraOutlined />Start Video Call</Button>\n        );\n    }\n\n    const ToolBtn = () => {\n\n        const client = useSelector(state => state.agoraClient);\n        const localStream = useSelector(state => state.localStream);\n        const leave = async () => {\n\n            if (localStream) {\n                localStream.close();\n                client.unpublish(localStream);\n            }\n\n            await client.leave();\n\n            removeLocalVideoStream(\"local-stream-container\");\n            dispatch(setJoinLeaveBtn(false));\n        };\n\n        const muteAudioLocalStream = async () => {\n            await localStream.muteAudio();\n            dispatch(setAudioMute(false));\n        };\n\n        const unmuteAudioLocalStream = async () => {\n            await localStream.unmuteAudio();\n            dispatch(setAudioMute(true));\n        };\n\n        const muteVideoLocalStream = async () => {\n            await localStream.muteVideo();\n            dispatch(setVideoMute(false));\n        };\n\n        const unmuteVideoLocalStream = async () => {\n            await localStream.unmuteVideo();\n            dispatch(setVideoMute(true));\n        };\n\n        function removeLocalVideoStream(elementId) {\n            let remoteDiv = document.getElementById(elementId);\n            if (remoteDiv) {\n                remoteDiv.removeChild(remoteDiv.childNodes[0]);\n            }\n        };\n\n        const MuteAudioBtn = () => {\n            return (\n                <Tooltip title=\"關閉麥克風\" color=\"#00000050\">\n                    <Button type=\"primary\" shape=\"circle\" onClick={() => muteAudioLocalStream()}><AudioMutedOutlined /></Button>\n                </Tooltip>\n            );\n        }\n\n        const UnMuteAudioBtn = () => {\n            return (\n                <Tooltip title=\"開啟麥克風\" color=\"#00000050\">\n                    <Button type=\"default\" shape=\"circle\" onClick={() => unmuteAudioLocalStream()}><AudioOutlined /></Button>\n                </Tooltip>\n            );\n        }\n\n        const MuteVideoBtn = () => {\n            return (\n                <Tooltip title=\"關閉鏡頭\" color=\"#00000050\">\n                    <Button type=\"primary\" shape=\"circle\" onClick={() => muteVideoLocalStream()}><CloseSquareOutlined /></Button>\n                </Tooltip>\n            );\n        }\n\n        const UnMuteVideoBtn = () => {\n            return (\n                <Tooltip title=\"開啟鏡頭\" color=\"#00000050\">\n                    <Button type=\"default\" shape=\"circle\" onClick={() => unmuteVideoLocalStream()}><VideoCameraOutlined /></Button>\n                </Tooltip>\n            );\n        }\n\n        return (\n            <div className=\"video-toolbtns\">\n                {isAudioMute ? <UnMuteAudioBtn /> :<MuteAudioBtn />}\n                {isVideoMute ? <UnMuteVideoBtn /> :<MuteVideoBtn />}\n                <Tooltip title=\"結束通話\" color=\"#00000050\">\n                    <Button type=\"danger\" shape=\"circle\" onClick={() => leave()}><PhoneOutlined rotate={225}/></Button>\n                </Tooltip>\n            </div>\n        );\n    }\n\n    return (\n        <Layout className=\"site-layout\">\n            <Header className=\"page-header\">\n                <Avatar size={40}>{userName}</Avatar>\n                <WhatsAppOutlined style={{ fontSize: '30px', color: '#fff' }}/> Agora Demo\n            </Header>\n            <Content className=\"main-container\">\n                <div className=\"chat-container\">\n                    <Row>\n                        <Col className=\"column\" xs={{ span: 22, offset: 1 }} md={{ span: 12, offset: isStart ? \"6\" : \"0\" }}>\n                            <div className={`chat-box ${isStart ? \"padding\" : \"join\"} `}>\n                                <div id=\"local-stream-container\">\n                                </div>\n                            </div>\n                        </Col>\n                        <Col className=\"column\" xs={{ span: 22, offset: 1 }} md={{ span: 12, offset: isStart ? \"6\" : \"0\" }}>\n                            <div className={`chat-box ${isStart ? \"\" : \"waiting\"} `}>\n                                <div id=\"remote-stream-container\">\n                                </div>\n                            </div>\n                        </Col>\n                        <Col className=\"column\" span={24}>\n                            {isStart ? <StartBtn /> : <ToolBtn />}\n                        </Col>\n                    </Row>\n                </div>\n            </Content>\n        </Layout>\n    );\n};","import React from \"react\";\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { setLoading, setPage, setUser, setVideoState } from './actions'\r\nimport { MainContainer } from './components/Main';\r\nimport { Typography, Layout, Form, Input, Button } from 'antd';\r\nimport {\r\n    WhatsAppOutlined,\r\n    SendOutlined,\r\n    IdcardOutlined,\r\n    LockOutlined,\r\n    AppstoreAddOutlined,\r\n    Loading3QuartersOutlined,\r\n    UserOutlined,\r\n} from '@ant-design/icons';\r\nimport 'antd/dist/antd.css';\r\nimport \"./App.css\";\r\n\r\nexport default function App() {\r\n\r\n    const isLoading = useSelector(state => state.isLoading);\r\n    const currentPage = useSelector(state => state.currentPage);\r\n    const dispatch = useDispatch();\r\n    const { Content } = Layout;\r\n    const { Title } = Typography;\r\n    \r\n    const onFormSubmit = (values) => {\r\n\r\n        dispatch(setLoading(true));\r\n        dispatch(setUser(values));\r\n\r\n        //TODO: Remove test token\r\n        // const testToken = \"0068af2afe5c07c456d8b0dec3829c8d6c3IADvxxZ0/GqKvbYKNBOYv6EbFUnZCCoA7Qc1joGe3QbmadJjSIgAAAAAEABID2UquUbAXwEAAQC5RsBf\";\r\n\r\n        const data = {\r\n            appId: values.appid,\r\n            channel: values.channel,\r\n            uid: \"\",\r\n            token: values.token,\r\n            cameraId: \"\",\r\n            microphoneId: \"\",\r\n            mode: \"rtc\",\r\n            codec: \"h264\"\r\n        };\r\n\r\n        setTimeout(function() {\r\n            dispatch(setPage(1));\r\n            dispatch(setLoading(false));\r\n        }, 1500);\r\n        \r\n        dispatch(setVideoState(data));\r\n\r\n    };\r\n\r\n    return (\r\n        <div className=\"App\">\r\n            {currentPage === 0 &&\r\n            <Layout>\r\n                <Content className=\"login-container\">\r\n                    <p><WhatsAppOutlined style={{ fontSize: '130px', color: '#fff' }}/></p>\r\n                    <Title level={2}>Agora Demo</Title>\r\n                    <Form name=\"normal_login\" className=\"login-form\" onFinish={onFormSubmit}>\r\n                        <Form.Item name=\"username\" rules={[ { required: true, message: 'Please input your Username!' , }, ]}>\r\n                            <Input prefix={<UserOutlined className=\"site-form-item-icon\" />} placeholder=\"Your Name\" />\r\n                        </Form.Item>\r\n                        <Form.Item name=\"appid\" rules={[ { required: true, message: 'Please input your App ID!' , }, ]}>\r\n                            <Input prefix={<IdcardOutlined className=\"site-form-item-icon\" />} placeholder=\"App ID\" />\r\n                        </Form.Item>\r\n                        <Form.Item name=\"token\" rules={[ { required: true, message: 'Please input your token!' , }, ]}>\r\n                            <Input prefix={<LockOutlined className=\"site-form-item-icon\" />}\r\n                            type=\"password\"\r\n                            placeholder=\"Token\"\r\n                            />\r\n                        </Form.Item>\r\n                        <Form.Item name=\"channel\" rules={[ { required: true, message: 'Please input channel' , }, ]}>\r\n                            <Input prefix={<AppstoreAddOutlined className=\"site-form-item-icon\" />}\r\n                            type=\"text\"\r\n                            placeholder=\"Channel\"\r\n                            />\r\n                        </Form.Item>\r\n                        <Form.Item>\r\n                            <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\" shape=\"round\"><SendOutlined />Enter</Button>\r\n                        </Form.Item>\r\n                    </Form>\r\n                    <Title level={5}>By Claire Lee</Title>\r\n                </Content>\r\n            </Layout>\r\n            }\r\n            {currentPage === 1 &&\r\n                <MainContainer />\r\n            }\r\n            {isLoading &&\r\n                <div className=\"loader-container\">\r\n                    <Loading3QuartersOutlined className=\"loader\" spin style={{ fontSize: '36px', color: '#fff' }} /> \r\n                    <div className=\"loader-bg\"></div>\r\n                </div>\r\n            }\r\n        </div>\r\n    );\r\n\r\n}","const initialState = {\n  appId: \"\",\n  channel: \"\",\n  uid: \"\",\n  token: undefined,\n  cameraId: \"\",\n  microphoneId: \"\",\n  mode: \"rtc\",\n  codec: \"h264\"\n};\n\nexport const videoDataReducer = (state = initialState, action) => {\n    switch (action.type) {\n        case 'SET_VIDEO_STATE':{\n            return action.payload\n        }\n        default:\n            return state\n    }\n}\n\nexport const clientReducer = (state = [], action) => {\n    switch (action.type) {\n        case 'SET_CLIENT':{\n            return action.payload\n        }\n        default:\n            return state\n    }\n}\n\nexport const localStreamReducer = (state = [], action) => {\n    switch (action.type) {\n        case 'SET_LOCAL_STREAM':{\n            return action.payload\n        }\n        default:\n            return state\n    }\n}\n","const initialState = []\n\nexport const userReducer = (state = initialState, action) => {\n    switch (action.type) {\n        case 'SET_USER':\n            return action.payload\n        default:\n            return state\n    }\n}","import { combineReducers } from 'redux'\nimport { audioMuteReducer, videoMuteReducer, startReducer, loadingReducer } from './statusReducer'\nimport { clientReducer, localStreamReducer, videoDataReducer } from './videoReducer'\nimport { pageReducer } from './pageReducer'\nimport { userReducer } from './userReducer'\n\nconst rootReducer = combineReducers({\n    isLoading: loadingReducer,\n    isStart: startReducer,\n    isAudioMute: audioMuteReducer,\n    isVideoMute: videoMuteReducer,\n    user: userReducer,\n    agoraClient: clientReducer,\n    localStream: localStreamReducer,\n    videoData: videoDataReducer,\n    currentPage: pageReducer\n})\n\nexport default rootReducer","export const startReducer = (state = true, action) => {\n    switch (action.type) {\n        case 'SET_JOIN_LEAVE':\n            return !state\n        default:\n            return state\n    }\n}\n\nexport const audioMuteReducer = (state = false, action) => {\n    switch (action.type) {\n        case 'SET_AUDIO_MUTE':\n            return !state\n        default:\n            return state\n    }\n}\n\nexport const videoMuteReducer = (state = false, action) => {\n    switch (action.type) {\n        case 'SET_VIDEO_MUTE':\n            return !state\n        default:\n            return state\n    }\n}\n\nexport const loadingReducer = (state = false, action) => {\n    switch (action.type) {\n        case 'SET_LOADING':\n            return !state\n        default:\n            return state\n    }\n}","export const pageReducer = (state = 0, action) => {\n    switch (action.type) {\n        case 'SET_CURRENTPAGE':\n            return action.payload\n        default:\n            return state\n    }\n}","import { createStore, applyMiddleware } from 'redux'\r\nimport thunkMiddleware from 'redux-thunk'\r\nimport { composeWithDevTools } from 'redux-devtools-extension'\r\nimport rootReducer from './reducers'\r\n\r\nconst composedEnhancer = composeWithDevTools(\r\n  applyMiddleware(thunkMiddleware)\r\n  // other store enhancers if any\r\n)\r\n\r\nconst store = createStore(rootReducer, composedEnhancer)\r\nexport default store\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport store from './store';\r\nimport { Provider } from 'react-redux';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}